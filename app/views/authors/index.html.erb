<ul class="nav nav-tabs" id="researchersTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#browse" role="tab" aria-controls="browse" aria-selected="true">Browse</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#statistics" role="tab" aria-controls="statistics" aria-selected="false">Statistics</a>
  </li>
  <% if user_signed_in? %>
  <li class="nav-item">
    <a class="nav-link" id="not-verified-tab" data-toggle="tab" href="#not-verified" role="tab" aria-controls="not-verified" aria-selected="false">not verified</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="actions-tab" data-toggle="tab" href="#actions" role="tab" aria-controls="not-verified" aria-selected="false">Actions</a>
  </li>
  <% end %>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="browse" role="tabpanel" aria-labelledby="browse-tab">
    Browse tab content
  </div>
  <div class="tab-pane fade" id="statistics" role="tabpanel" aria-labelledby="statistics-tab">
    Statistics tab content
  </div>
  <div class="tab-pane fade" id="not-verified" role="tabpanel" aria-labelledby="not-verified-tab">
    Not verified
  </div>
  <div class="tab-pane fade" id="actions" role="tabpanel" aria-labelledby="actions-tab">
    Actions
  </div>
</div> <!-- Tabs Containter-->


<div class="container">
  <p id="notice"><%= notice %></p>
  <h1>UK Catalysis Hub Authors</h1>
  <%= will_paginate @authors, renderer: WillPaginate::ActionView::BootstrapLinkRenderer  %>
  <table class="table">
    <thead class="thead-light">
      <tr>
        <th>Author</th>
        <th>Articles</th>
        <th>ORCID</th>
      </tr>
    </thead>

    <tbody>
      <% @authors.each do |author| %>
        <tr>
          <%
            expertise = []
            expertise_lnks = ""
            author.articles.each do |art|
              art.article_themes.each do |art_theme|
                if not expertise.include?(art_theme.theme.short) then
                  expertise.push(art_theme.theme.short)
                  if expertise_lnks == "" then
                    expertise_lnks = link_to(art_theme.theme.short, art_theme.theme)
                  else
                    expertise_lnks += ", ".html_safe + link_to(art_theme.theme.short, art_theme.theme)
                  end
                end
              end
            end
          %>
          <td><%= link_to(author.full_name, author) %> <b>Expertise:</b> <%= expertise_lnks %> </td>
          <th> <%= author.articles.count %> </td>
          <th> <%= author.orcid %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <br>
  <% if user_signed_in? %>
    <%= link_to 'New Author', new_author_path, :class => "btn btn-success btn-sm"  %>
  <% end %>
</div>
